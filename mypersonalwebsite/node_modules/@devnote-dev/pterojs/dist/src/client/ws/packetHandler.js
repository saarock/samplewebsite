"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const caseConv_1 = require("../../util/caseConv");
/**
 * Handles the event dispatching of websocket events for the shard.
 * This is used interally by the {@link WebSocketManager} and should not be
 * accessed externally.
 * @param shard The websocket shard.
 * @param payload The websocket event payload.
 * @internal
 */
function default_1(shard, payload) {
    const args = payload.args || [];
    switch (payload.event) {
        case 'status':
            shard.emit('statusUpdate', args.join());
            break;
        case 'console output':
            shard.emit('serverOutput', args.join());
            break;
        case 'daemon message':
            shard.emit('daemonMessage', args.join());
            break;
        case 'install started':
            shard.emit('installStart');
            break;
        case 'install output':
            shard.emit('installOutput', args.join());
            break;
        case 'install completed':
            shard.emit('installComplete');
            break;
        case 'stats':
            const stats = JSON.parse(args.join());
            shard.emit('statsUpdate', caseConv_1.default.toCamelCase(stats));
            break;
        case 'transfer logs':
        case 'transfer status':
            shard.emit('transferUpdate', args.join());
            break;
        case 'backup completed':
            const backup = JSON.parse(args.join());
            shard.emit('backupComplete', caseConv_1.default.toCamelCase(backup));
            break;
        case 'daemon error':
        case 'jwt error':
            shard.emit('error', args.join());
            break;
        default:
            shard.emit('error', `received unknown event '${payload.event}'`);
            break;
    }
}
exports.default = default_1;
